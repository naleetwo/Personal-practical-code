통계
--------------------------------------
1. 구분
	기술 통계 > 추정(추론, 예측) > 검정(테스트)
		-점 추정, 구간추정 --> 수치화 --> 가설검정
		
2. 가설 검정 : p - value 0.05 보다 큰지 작은지에 대한 검정
	(1) 가설
		- 모수에 대한 주장
		- 통계학에서는 이 가설을 수식을 표현
		- 그리고 어떤 가설이 맞는지를 판단하는 것이기 때문에 두 가지로 양분된다.
	(2) 귀무 가설 : H0로 표시
			1) 0가설, null 가설(차이가 없다, 효과 없다, 관계 없다)
			2) 관습적, 보수적 주장
	(3) 대립 가설 : H1로 표시
			1) 연구 가설(차이가 있다, 효과가 있다, 관계가 있다)
			2) 적극적으로 실험자가 입증하고자 하는 주장
	(4) 가설 검정
		1) 모수에 대한 어떤 주장(가설)이 맞는지를 판정하는 행위
		2) 귀무가설을 채택 또는 기각
		3) 대립가설을 채택 또는 기각
		## 귀무가설을 채택하면 새롭게 입증된 사실이 없다는 것을 의미하고
		귀무가설을 기각하면 새로운 사실이 입증되는 것이다.
	(5) 기각역
		1) 귀무가설이 틀리다고 판정할 때 기준이 되는 검정 통계량의 범위
		2) 틀릴 확률을 각오해야 한다.
		3) 틀릴 확률은 유의 수준이다.
	(6) 유의 수준
		1) 귀무가설이 맞는데도 틀리다고 판정할 확률
			H0가 사실임에도 H0을 기각하는 것이다. 이것을 알파로 표시(1종 오류)
			H0가 거짓임에도 H0을 채택하는 것이다. 이걸을 베타로 표시(2종 오류)
		2) 일반적으로 5%의 유의 수준을 주로 사용한다.
			95%의 신뢰 수준과 같은 의미
		
		
3. 통계 분석 방법
	(1) 차이 검정
		- 집단간의 평균 차이 검정
		- t-test, anova, ancova, manova, ...
		- 변수 타입 : 명목변수 -> 연속변수
					ex) 남자, 여자 키 차이
		양적 (이산, 연속), 질적 (명목(범주), 서열)
		1) t-test(student t-test) : 비교 대상이 2개까지인 경우
			- 하나의 집단으로 검정 : one sample t-test (모집단, 표본집단)
			- 두개의 집단으로 검정 : independent two sample t-test
			- 하나의 집단을 시간의 차이로 검정 : paired sample t-test
				- 결과값이 연속변수
					결과값이 연속변수가 아닐경우 : Mann-Whitney U test, Wilcoxen rank-sum test, Mann-Whitney-Wilcoxen test, MWW
				- 정규 분포 여부
					- 아닐 경우 : MWW,Mann-Whitney-Wilcoxen test
				- 등분산 여부 
					- 아닐 경우 : Welch's test
				- paired sample t-test 인 경우 Wilcoxen signed rank test(비모수일 경우)
				
			
			@@ 모수적인 통계 방식과 비모수적인 통계 방식
				- 모수적인 통계 방식 : 정규 분포인 경우
				- 비모수적인 통계 방식 : 정규 분포가 아닐 경우
				
 				A 20 21 21 22 124
				B 40 41 42 43 42
				
				A  A    A   A   B  B   B    B    B  A 
				20 21   21  22  40 41  42   42   43 124
				1  2.5  2.5  4  5  6   7.5  7.5  9  10
				-- rank-sum ex)
				A = 1 + 2.5 + 2.5 + 4 + 10 = 20
				B = 5 + 6 + 7.5 + 7.5 +9 = 35
				
		2) ANOVA(analysis of variance;분산분석) : 비교 대상이 3개 이상인 경우
				- 집단이 3개 이상일 때 : One Way ANOVA
					- Independent Two Sample t-test의 확장
					
				- 한개의 집단을 여러번(3번 이상) 비교할 때: Repeated Measured ANOVA
					- Paired One Sample t-test의 확장
					- 구형성(Sphericity) : 이미 독립성이 깨졌으므로 최대한 독립성과 무작위성을 확보하기 위한 조건
						가정 : 반복 측정된 자료들의 시차에 따른 분산이 동일
							a) Mouchly의 단위행렬 검정: p-value > 0.05 검정을 인정함
							b) 만약 p-value <0.05, Greenhouse 를 사용한다. == 값이 1에 가까울수록 구형성이 타당함
					- 만약 서열변수이거나 정규분포가 아니라면
						Friedman Test
						
						
				- 요인에 따른 차이 검정 : Two Way ANOVA
				
				- 시간 + 요인에 따른 차이 검정 : Two Way Repeated Measured ANOVA
				
				- 조건
					- 결과값이 연속변수
							아닐경우 : Kruskal-Wallis H test
					- 정규 분포 여부
							아닐경우 : Kruskal-Wallis H test
					- 등분산 여부
							아닐경우 : Welch's anova
					
					모든 조건을 만족하는 경우 anova를 사용한다.
				
				- 사후 검정 (검정후 추가 검정을 해야함)
					- Tukey, DUNcan, Bonferroni, Fisher's LSD ....
					
	(2) 관계 검정
		- 변수와 변수의 관계를 검정
		- 연속변수 -> 연속변수, 질적변수 -> 질적변수
		
		1) 상관 관계 분석(Correlation)
			- 변수 타입 : 연속변수 -> 연속변수
			- 1:1 로 서로 동등한 입장에서 관계 분석
			- 측정 측도
				- 공분산(Covariance)
				- 상관계수(R계수) : -1 ~ 1
			- 측정 방식 (방법에 따라 공식이 달라짐)
				- 모수적인 방법(정규분포) : 피어슨의 상관 계수
				- 비모수적인 방법(비정규분포) : 스피어만의 상관 계수, 켄달의 tau
			- 원인결과를 따지지 않고, 관계가 있는가 없는가만 측정함
			- 수학적인 관계 판단(속성의 관계를 판단하는 것이 아니다) ****
			- 회귀분석 전 단계에서 주로 사용
			- 선형 함수
			 
		2) 교차 분석(Chi square)
			- 변수 타입 : 질적 변수 -> 질적 변수
			- 비율 검정
			- 조건
				- 데이터 수가 충분할 때 : Chi-Square Test
					- 각 cell의 기대빈도가 5보다 커야함
					- 기대빈도가 5보다 작은 cell의 수는 최소한 전체 cell의 25% 미만이여야함
				- 데이터 수가 부족할 때: Fisher's Exact Test
				- 질적변수가 서열변수라면(Trend) : Cocran-Armitage Trend Test
			- 기준에 따라 차이검정일수도 있고 관계 검정 일 수도 있다.
				- 일원 교차분석 : 차이검정
				- 이원 교차분석 : 관계검정
		
		3) 회귀 분석
			- 변수 타입 : 연속변수 -> 연속변수
			- 인과 관계 ( 여러 개의 원인변수 (독립변수, 설명변수)와 한개의 결과변수(종속변수, 반응변수))
			- 측정 계수 : R^2 계수(설명력) or 설명계수라고도 불림 
			- 독립변수의 갯수에 따라
					- 단일 회귀 분석  : 독립변수 1개, 종속변수 1개
					- 다중 회귀 분석  : 독립변수 여러개, 종속변수 1개
			- 분포에 따라
					- 정규분포 : 선형 회귀 분석(lm())
					- 이항분포 : 로지스틱 회귀 분석(glm())
			- 조건
					- 연속 변수(선형)
					- 정규 분포
					- 등분산
					- 독립성 (다중 공선성이 작아야한다. - 변수간의 공통점이 작아야 한다.)
					
				$$ 다중 공선성
					- 원인 : 독립변수들끼리 너무 많이 겹쳐서 발생하는 문제
					- 확인 방법 : 
							- 산포도, 상관 계수: 상관 계수가 0.9를 넘게 되면 다중 공선성 문제
							- VIF 지수 : Variance Inflation Factor 분산팽창지수
							- 일반적으로 10보다 크면 문제가 있다고 판단(연속형변수)
							- 더미 변수일 경우에는 3이상이면 문제가 있다고 판단
							- sqrt(vif) > 2 == 다중공선성이 있다고 판단
					- 해결 방법 :
							- 변수를 뺀다
							- 주성분 분석
		
				$$ 이상치
					- 이상치(outlier) : 표준편차 2배 이상 크거나 작은값
					- 큰 지레점(High Leverage Points)
						p(절편을 포함한 인자들의 숫자) / n(전체 데이터 갯수) 의 값이 2~3 배이상 되는 관측치
						5 / 50 = 0.1 
					- 영향 관측치 (Influential Observation, Cook's D)
						독립변수의 수 / (샘플의 수 - 예측인자의 수 - 1)
				
					-로지스틱 회귀분석 (2분화시키는것)
					 y = ax + b
					 log(y) = e^(ax + b)
					 0 ~ 1 사이 데이터가 나오도록 만들어줌